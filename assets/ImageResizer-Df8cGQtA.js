import{r as f,j as u,l as V}from"./index-BlIc72Jk.js";const j="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M22%203H2v18h20v-2h-2v-2h2v-2h-2v-2h2v-2h-2V9h2V7h-2V5h2V3zm-2%204v2h-2v2h2v2h-2v2h2v2h-2v2H4V5h14v2h2zm-6%202h-2v2h-2v2H8v2H6v2h2v-2h2v-2h2v-2h2v2h2v-2h-2V9zM6%207h2v2H6V7z'%20fill='%23000000'/%3e%3c/svg%3e";function y(m,p,l){return Math.min(Math.max(m,p),l)}const s={east:1,north:8,south:2,west:4};function C({onResizeStart:m,onResizeEnd:p,imageRef:l,maxWidth:x,editor:z}){const v=f.useRef(null),d=f.useRef({priority:"",value:"default"}),w=f.useRef({currentHeight:0,currentWidth:0,direction:0,isResizing:!1,ratio:0,startHeight:0,startWidth:0,startX:0,startY:0}),c=z.getRootElement(),H=x||(c!==null?c.getBoundingClientRect().width-20:100),E=c!==null?c.getBoundingClientRect().height-20:100,R=100,M=100,D=e=>{const r=e===s.east||e===s.west,t=e===s.north||e===s.south,a=e&s.north&&e&s.west||e&s.south&&e&s.east,i=r?"ew":t?"ns":a?"nwse":"nesw";c!==null&&c.style.setProperty("cursor",`${i}-resize`,"important"),document.body!==null&&(document.body.style.setProperty("cursor",`${i}-resize`,"important"),d.current.value=document.body.style.getPropertyValue("-webkit-user-select"),d.current.priority=document.body.style.getPropertyPriority("-webkit-user-select"),document.body.style.setProperty("-webkit-user-select","none","important"))},X=()=>{c!==null&&c.style.setProperty("cursor","text"),document.body!==null&&(document.body.style.setProperty("cursor","default"),document.body.style.setProperty("-webkit-user-select",d.current.value,d.current.priority))},g=(e,r)=>{if(!z.isEditable())return;const t=l.current,a=v.current;if(t!==null&&a!==null){e.preventDefault();const{width:i,height:h}=t.getBoundingClientRect(),o=V(t),n=w.current;n.startWidth=i,n.startHeight=h,n.ratio=i/h,n.currentWidth=i,n.currentHeight=h,n.startX=e.clientX/o,n.startY=e.clientY/o,n.isResizing=!0,n.direction=r,D(r),m(),a.classList.add("image-control-wrapper--resizing"),t.style.height=`${h}px`,t.style.width=`${i}px`,document.addEventListener("pointermove",P),document.addEventListener("pointerup",b)}},P=e=>{const r=l.current,t=w.current,a=t.direction&(s.east|s.west),i=t.direction&(s.south|s.north);if(r!==null&&t.isResizing){const h=V(r);if(a&&i){let o=Math.floor(t.startX-e.clientX/h);o=t.direction&s.east?-o:o;const n=y(t.startWidth+o,R,H),W=n/t.ratio;r.style.width=`${n}px`,r.style.height=`${W}px`,t.currentHeight=W,t.currentWidth=n}else if(i){let o=Math.floor(t.startY-e.clientY/h);o=t.direction&s.south?-o:o;const n=y(t.startHeight+o,M,E);r.style.height=`${n}px`,t.currentHeight=n}else{let o=Math.floor(t.startX-e.clientX/h);o=t.direction&s.east?-o:o;const n=y(t.startWidth+o,R,H);r.style.width=`${n}px`,t.currentWidth=n}}},b=()=>{const e=l.current,r=w.current,t=v.current;if(e!==null&&t!==null&&r.isResizing){const a=r.currentWidth,i=r.currentHeight;r.startWidth=0,r.startHeight=0,r.ratio=0,r.startX=0,r.startY=0,r.currentWidth=0,r.currentHeight=0,r.isResizing=!1,t.classList.remove("image-control-wrapper--resizing"),X(),p(a,i),document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",b)}};return u.jsxs("div",{ref:v,children:[u.jsx("div",{className:"image-resizer image-resizer-ne",onPointerDown:e=>{g(e,s.north|s.east)}}),u.jsx("div",{className:"image-resizer image-resizer-se",onPointerDown:e=>{g(e,s.south|s.east)}}),u.jsx("div",{className:"image-resizer image-resizer-sw",onPointerDown:e=>{g(e,s.south|s.west)}}),u.jsx("div",{className:"image-resizer image-resizer-nw",onPointerDown:e=>{g(e,s.north|s.west)}})]})}export{C as I,j as b};
